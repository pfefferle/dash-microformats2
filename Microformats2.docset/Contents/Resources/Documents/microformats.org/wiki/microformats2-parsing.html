<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from microformats.org/wiki/microformats2-parsing by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Sep 2018 13:59:24 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

	<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
	
	<meta content="MediaWiki 1.13.2" name="generator"/>
		<meta content="microformats2-parsing,IRC,microformats2,microformats2-implied-properties,microformats2-parsing-brainstorming,microformats2-parsing-faq,microformats2-parsing-issues,microformats2-parsing-rdf,value-class-pattern,Tantek" name="keywords"/>
		
		
		
		
	<link href="skins/common/shared.css" rel="stylesheet" type="text/css"/>		
	<link href="skins/Microformats/microformats.css" rel="stylesheet" type="text/css"/>

	


    
    		


        
        	
	<title>microformats2 parsing specification · Microformats Wiki</title>
	
<style id="dash-style" type="text/css">.content { width: 100%; }</style></head>
	<!-- TODO: Template-dervied body class: spec and draft -->
<body class="page-microformats2-parsing specification draft">
    
    

    <div class="content hentry">
    
	

	    <h1 class="entry-title">microformats2 parsing specification</h1>

		<p class="sub-title"></p>

								    <!-- TODO: Jump nav -->
		    <div id="jump-to-nav">Jump to:		        <a href="#sidebar">navigation</a>, 
		        <a href="#search">search</a>
		    </div>
		        
        <div class="entry-content">
		<p><dfn style="font-style:normal;font-weight:bold"><a href="microformats2.html" title="microformats2">microformats2</a></dfn> is a simple, open format for marking up data in HTML. The microformats2 parsing specification describes how to <a href="#implementations" title="">implement</a> a microformats2 parser, independent of any specific vocabularies.
</p>
<dl><dt><span id="status">Status</span>
</dt><dd>This is a <b>Living Specification</b> with several interoperable <a href="#implementations" title="">implementations</a>. This specification is stable, subject to editorial changes only for improving clarity of existing meaning. While substantive changes are unexpected, it is a living specification subject to substantive change by issues and errata filed in response to implementation experience, requiring consensus among participating implementers (since 2015-01-21) as part of an explicit <a href="#change_control" title="">change control</a> process. There are currently no draft or proposed new features in this specification, and if any were to be added, they would be explicitly labeled as such.<br/>Note: This specification is only marked as a "Draft Specification" because of pending edits from <a href="microformats2-parsing-issues.html" title="microformats2-parsing-issues">resolved issues before 2016-06-20</a>. Once those edits have been completed, the link to [[Category:Draft Specifications]] at the bottom of this document should be changed to [[Category:Specifications]].
</dd><dt>Participate
</dt><dd><a class="external text" href="https://github.com/microformats/microformats2-parsing/issues" rel="nofollow" title="https://github.com/microformats/microformats2-parsing/issues">Open Issues</a>
</dd><dd><a href="microformats2-parsing-issues.html" title="microformats2-parsing-issues">Resolved issues before 2016-06-20</a>
</dd><dd><a class="mw-redirect" href="http://microformats.org/wiki/IRC" title="IRC">IRC</a>: <a class="external text" href="irc://irc.freenode.net/microformats" rel="nofollow" title="irc://irc.freenode.net/microformats">#microformats on Freenode</a>
</dd></dl>
<div class="p-author h-card vcard">
<dl><dt><span class="p-role role">Editor</span>
</dt><dd><span class="p-name fn"><a href="http://microformats.org/wiki/User:Tantek" title="User:Tantek">Tantek Çelik</a></span>
</dd></dl>
</div>
<dl><dt>License
</dt><dd> <small>Per <a class="external text" href="http://creativecommons.org/publicdomain/zero/1.0/" rel="nofollow" title="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a>, to the extent possible under law, the editors have waived all copyright and related or neighboring rights to this work. In addition, as of 2018-09-10, the editors have made this specification available under the <a class="external text" href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0" rel="nofollow" title="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0">Open Web Foundation Agreement Version 1.0</a>.</small>
</dd></dl>

<a name="algorithm"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/algorithm"></a> algorithm </span></h2>
<a name="parse_a_document_for_microformats"></a><h3> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parse%20a%20document%20for%20microformats"></a> parse a document for microformats </span></h3>
<p>To parse a document for microformats, follow the HTML parsing rules and do the following:
</p>
<ul><li> start with an empty JSON "items" array and "rels" &amp; "rel-urls" hashes: 
</li></ul>
<div dir="ltr" style="text-align: left;"><pre class="source-javascript"><span class="br0">{</span>
 <span class="st0">"items"</span><span class="sy0">:</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">,</span>
 <span class="st0">"rels"</span><span class="sy0">:</span> <span class="br0">{</span><span class="br0">}</span><span class="sy0">,</span>
 <span class="st0">"rel-urls"</span><span class="sy0">:</span> <span class="br0">{</span><span class="br0">}</span>
<span class="br0">}</span></pre></div>
<ul><li> parse the root element for class microformats, adding to the JSON items array accordingly
</li><li> parse all hyperlink (<code>&lt;a&gt; &lt;area&gt; &lt;link&gt;</code>) elements for rel microformats, adding to the JSON rels &amp; rel-urls hashes accordingly
</li><li> return the resulting JSON
</li></ul>
<p>Parsers may simultaneously parse the document for both class and rel microformats (e.g. in a single tree traversal).
</p>
<a name="parse_an_element_for_class_microformats"></a><h3> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parse%20an%20element%20for%20class%20microformats"></a> parse an element for class microformats </span></h3>
<p>To parse an element for class microformats:
</p>
<ul><li> parse element class for root class name(s) "h-*" and if none, backcompat root classes
<ul><li> if none found, parse child elements for microformats (depth first, doc order)
</li><li> else if found, start parsing a new microformat
<ul><li> keep track of whether the root class name(s) was from backcompat
</li><li> create a new { } structure with:
<ul><li> <code>type: [array of unique microformat "h-*" type(s) on the element sorted alphabetically],</code>
</li><li> <code>properties: { } </code> - to be filled in when that element itself is parsed for microformats properties
</li></ul>
</li><li> parse child elements (document order) by:
<ul><li> if parsing a backcompat root, parse child element class name(s) for backcompat properties
</li><li> else parse a child element class for property class name(s) "p-*,u-*,dt-*,e-*"
</li><li> if such class(es) are found, it is a property element
<ul><li> add properties found to current microformat's <code>properties: { } </code> structure
</li></ul>
</li><li> parse a child element for microformats (recurse)
<ul><li> if that child element itself has a microformat ("h-*" or backcompat roots) and is a property element, add it into the array of values for that property as a { } structure, add to that { } structure:
<ul><li> <code>value</code>: 
<ul><li> if it's a <code>p-*</code> property element, use the first p-name of the h-* child 
</li><li> else if it's an <code>e-*</code> property element, re-use its { } structure with existing <code>value:</code> inside.
</li><li> else if it's a <code>u-*</code> property element and the h-* child has a u-url, use the first such u-url
</li><li> else use the parsed property value per p-*,u-*,dt-* parsing respectively
</li></ul>
</li></ul>
</li><li> else add found elements that are microformats to the "children" array
</li></ul>
</li></ul>
</li><li> imply properties for the found microformat (see below)
</li></ul>
</li></ul>
</li></ul>
<p>The "*" for root (and property) class names consists of an optional vendor prefix (series of 1+ number or lowercase a-z characters i.e. <code>[0-9a-z]+</code>, followed by '-'), then one or more '-' separated lowercase a-z words.
</p>
<a name="parse_an_element_for_properties"></a><h3> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parse%20an%20element%20for%20properties"></a> parse an element for properties </span></h3>
<a name="parsing_a_p-_property"></a><h4> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parsing%20a%20p-%20property"></a> parsing a <code>p-</code> property </span></h4>
<p>To parse an element for a <code><a class="dashAnchor" name="//apple_ref/cpp/Property/p-x"></a>p-x</code> property value (whether explicit <code>p-*</code> or backcompat equivalent):
</p>
<ul><li> Parse the element for the <a href="http://microformats.org/wiki/value-class-pattern" title="value-class-pattern">value-class-pattern</a>. If a value is found, return it.
</li><li> If <code>abbr.p-x[title]</code> or <code>link.p-x[title]</code>, return the <code>title</code> attribute.
</li><li> else if <code>data.p-x[value]</code> or <code>input.p-x[value]</code>, then return the <code>value</code> attribute
</li><li> else if <code>img.p-x[alt]</code> or <code>area.p-x[alt]</code>, then return the <code>alt</code> attribute
</li><li> else return the <code>textContent</code> of the element after:
<ul><li> dropping any nested <code>&lt;script&gt;</code> &amp; <code>&lt;style&gt;</code> elements;
</li><li> replacing any nested <code>&lt;img&gt;</code> elements with their <code>alt</code> attribute, if present; otherwise their <code>src</code> attribute, if present, adding a space at the beginning and end, resolving the URL if it’s relative;
</li><li> removing all leading/trailing whitespace
</li></ul>
</li></ul>
<a name="parsing_a_u-_property"></a><h4> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parsing%20a%20u-%20property"></a> parsing a <code>u-</code> property </span></h4>
<p>To parse an element for a <code><a class="dashAnchor" name="//apple_ref/cpp/Property/u-x"></a>u-x</code> property value (whether explicit <code>u-*</code> or backcompat equivalent):
</p>
<ul><li> if <code>a.u-x[href]</code> or <code>area.u-x[href]</code> or <code>link.u-x[href]</code>, then get the <code>href</code> attribute
</li><li> else if <code>img.u-x[src]</code> or <code>audio.u-x[src]</code> or <code>video.u-x[src]</code> or <code>source.u-x[src]</code> or <code>iframe.u-x[src]</code>, then get the <code>src</code> attribute
</li><li> else if <code>video.u-x[poster]</code>, then get the <code>poster</code> attribute
</li><li> else if <code>object.u-x[data]</code>, then get the <code>data</code> attribute
</li><li> if there is a gotten value, return the normalized absolute URL of it, following the containing document's language's rules for resolving relative URLs (e.g. in HTML, use the current URL context as determined by the page, and first <code>&lt;base&gt;</code> element, if any).
<ul><li> PROPOSED (<a class="external text" href="https://github.com/microformats/microformats2-parsing/issues/10" rel="nofollow" title="https://github.com/microformats/microformats2-parsing/issues/10">per issue 10</a>): do this relative URL resolution step AFTER all the other (following) value retrieval steps.
</li></ul>
</li><li> else parse the element for the <a href="http://microformats.org/wiki/value-class-pattern" title="value-class-pattern">value-class-pattern</a>. If a value is found, get it
</li><li> else if <code>abbr.u-x[title]</code>, then get the <code>title</code> attribute
</li><li> else if <code>data.u-x[value]</code> or <code>input.u-x[value]</code>, then get the <code>value</code> attribute
</li><li> else get the <code>textContent</code> of the element after removing all leading/trailing whitespace and nested <code>&lt;script&gt;</code> &amp; <code>&lt;style&gt;</code> elements
</li><li> PROPOSED (<a class="external text" href="https://github.com/microformats/microformats2-parsing/issues/10" rel="nofollow" title="https://github.com/microformats/microformats2-parsing/issues/10">per issue 10</a>): "return the normalized absolute URL of the gotten value, following the containing document's language's rules for resolving relative URLs (e.g. in HTML, use the current URL context as determined by the page, and first <code>&lt;base&gt;</code> element, if any)."
</li><li> return the gotten value
</li></ul>
<a name="parsing_a_dt-_property"></a><h4> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parsing%20a%20dt-%20property"></a> parsing a <code>dt-</code> property </span></h4>
<p>To parse an element for a <code><a class="dashAnchor" name="//apple_ref/cpp/Property/dt-x"></a>dt-x</code> property value (whether explicit <code>dt-*</code> or backcompat equivalent):
</p>
<ul><li> parse the element for the <a href="http://microformats.org/wiki/value-class-pattern" title="value-class-pattern">value-class-pattern</a>, including the date and time parsing rules. If a value is found, then return it.
</li><li> if <code>time.dt-x[datetime]</code> or <code>ins.dt-x[datetime]</code> or <code>del.dt-x[datetime]</code>, then return the <code>datetime</code> attribute
</li><li> else if <code>abbr.dt-x[title]</code>, then return the <code>title</code> attribute
</li><li> else if <code>data.dt-x[value]</code> or <code>input.dt-x[value]</code>, then return the <code>value</code> attribute
</li><li> else return the <code>textContent</code> of the element after removing all leading/trailing whitespace and nested <code>&lt;script&gt;</code> &amp; <code>&lt;style&gt;</code> elements.
</li></ul>
<a name="parsing_an_e-_property"></a><h4> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parsing%20an%20e-%20property"></a> parsing an <code>e-</code> property </span></h4>
<p>To parse an element for a <code><a class="dashAnchor" name="//apple_ref/cpp/Property/e-x"></a>e-x</code> property value (whether explicit "<code>e-*"</code> or backcompat equivalent):
</p>
<ul><li> return a dictionary with two keys:
<ul><li> <code>html</code>: the <code>innerHTML</code> of the element by using the <a class="external text" href="https://html.spec.whatwg.org/multipage/parsing.html#serialising-html-fragments" rel="nofollow" title="https://html.spec.whatwg.org/multipage/parsing.html#serialising-html-fragments">HTML spec: Serializing HTML Fragments algorithm</a>, with leading/trailing whitespace removed.
</li><li> <code>value</code>: the <code>textContent</code> of the element after:
<ul><li> dropping any nested <code>&lt;script&gt;</code> &amp; <code>&lt;style&gt;</code> elements;
</li><li> replacing any nested <code>&lt;img&gt;</code> elements with their <code>alt</code> attribute, if present; otherwise their <code>src</code> attribute, if present, adding a space at the beginning and end, resolving the URL if it’s relative;
</li><li> removing all leading/trailing whitespace
</li></ul>
</li></ul>
</li></ul>
<p><br/>
</p>
<a name="parsing_for_implied_properties"></a><h4> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parsing%20for%20implied%20properties"></a> parsing for implied properties </span></h4>
<p>Imply properties only on explicit <code><a class="dashAnchor" name="//apple_ref/cpp/Object/h-x"></a>h-x</code> class name root microformat element (no backcompat roots):
</p>
<ul><li> if no explicit "<code>name</code>" property, and no other <code>p-*</code> or <code>e-*</code> properties, and no nested microformats,
</li><li> then imply by:
<ul><li> if <code>img.h-x</code> or <code>area.h-x</code>, then use its <code>alt</code> attribute for name
</li><li> else if <code>abbr.h-x[title]</code> then use its <code>title</code> attribute for name
</li><li> else if <code>.h-x&gt;img:only-child[alt]:not([alt=""]):not[.h-*]</code> then use that <code>img</code>’s <code>alt</code> for name
</li><li> else if <code>.h-x&gt;area:only-child[alt]:not([alt=""]):not[.h-*]</code> then use that <code>area</code>’s <code>alt</code> for name
</li><li> else if <code>.h-x&gt;abbr:only-child[title]:not([title=""]):not[.h-*]</code> then use that <code>abbr</code> <code>title</code> for name
</li><li> else if <code>.h-x&gt;:only-child:not[.h-*]&gt;img:only-child[alt]:not([alt=""]):not[.h-*]</code> then use that <code>img</code>’s <code>alt</code> for name
</li><li> else if <code>.h-x&gt;:only-child:not[.h-*]&gt;area:only-child[alt]:not([alt=""]):not[.h-*]</code> then use that <code>area</code>’s <code>alt</code> for name
</li><li> else if <code>.h-x&gt;:only-child:not[.h-*]&gt;abbr:only-child[title]:not([title=""]):not[.h-*]</code> use that <code>abbr</code>’s <code>title</code> for name
</li><li> else use the <code>textContent</code> of the <code>.h-x</code> for <code>name</code> after:
<ul><li> dropping any nested <code>&lt;script&gt;</code> &amp; <code>&lt;style&gt;</code> elements;
</li><li> replacing any nested <code>&lt;img&gt;</code> elements with their <code>alt</code> attribute, if present;
</li></ul>
</li><li> remove all leading/trailing whitespace
</li></ul>
</li><li> if no explicit "<code>photo</code>" property, 
</li><li> then imply by:
<ul><li> if <code>img.h-x[src]</code>, then use <code>src</code> for photo
</li><li> else if <code>object.h-x[data]</code> then use <code>data</code> for photo
</li><li> else if <code>.h-x&gt;img[src]:only-of-type:not[.h-*]</code> then use that <code>img</code> <code>src</code> for photo
</li><li> else if <code>.h-x&gt;object[data]:only-of-type:not[.h-*]</code> then use that <code>object</code>’s <code>data</code> for photo
</li><li> else if <code>.h-x&gt;:only-child:not[.h-*]&gt;img[src]:only-of-type:not[.h-*]</code>, then use that <code>img</code>’s <code>src</code> for photo
</li><li> else if <code>.h-x&gt;:only-child:not[.h-*]&gt;object[data]:only-of-type:not[.h-*]</code>, then use that <code>object</code>’s <code>data</code> for photo
</li><li> if there is a gotten photo value, return the normalized absolute URL of it, following the containing document's language's rules for resolving relative URLs (e.g. in HTML, use the current URL context as determined by the page, and first <code>&lt;base&gt;</code> element, if any).
</li></ul>
</li><li> if no explicit "<code>url</code>" property, and no other explicit <code>u-*</code> properties, and no nested microformats,
</li><li> then imply by:
<ul><li> if <code>a.h-x[href]</code> or <code>area.h-x[href]</code> then use that <code>[href]</code> for url
</li><li> else if <code>.h-x&gt;a[href]:only-of-type:not[.h-*]</code>, then use that <code>[href]</code> for url
</li><li> else if <code>.h-x&gt;area[href]:only-of-type:not[.h-*]</code>, then use that <code>[href]</code> for url
</li><li> else if <code>.h-x&gt;:only-child:not[.h-*]&gt;a[href]:only-of-type:not[.h-*]</code>, then use that <code>[href]</code> for url
</li><li> else if <code>.h-x&gt;:only-child:not[.h-*]&gt;area[href]:only-of-type:not[.h-*]</code>, then use that <code>[href]</code> for url
</li><li> if there is a gotten url value, return the normalized absolute URL of it, following the containing document's language's rules for resolving relative URLs (e.g. in HTML, use the current URL context as determined by the page, and first <code>&lt;base&gt;</code> element, if any).
</li></ul>
</li></ul>
<p><strong>Note:</strong> The same markup for a property should not be causing that property to occur in <em>both</em> a microformat and one embedded inside - such a property should only be showing up on one of them. The parsing algorithm has details to prevent that, such as the <code>:not[.h-*]</code> tests above.
</p>
<a name="parse_a_hyperlink_element_for_rel_microformats"></a><h3> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/parse%20a%20hyperlink%20element%20for%20rel%20microformats"></a> parse a hyperlink element for rel microformats </span></h3>
<p>To parse a hyperlink element (e.g. a or link) for rel microformats: use the following algorithm or an algorithm that produces equivalent results:
</p>
<ul><li> if the "rel" attribute of the element is empty then exit
</li><li> set url to the value of the "href" attribute of the element, normalized to be an absolute URL following the containing document's language's rules for resolving relative URLs (e.g. in HTML, use the current URL context as determined by the page, and first <code>&lt;base&gt;</code> element if any).
</li><li> treat the "rel" attribute of the element as a space separate set of rel values
</li><li> for each rel value (rel-value)
<ul><li> if there is no key rel-value in the rels hash then create it with an empty array as its value
</li><li> if url is not in the array of the key rel-value in the rels hash then add url to the array
</li></ul>
</li><li> end for
</li><li> if there is no key with name url in the top-level "rel-urls" hash then add a key with name url there, with an empty hash value
</li><li> add keys to the hash of the key with name url for each of these attributes (if present) and key not already set:
<ul><li> "hreflang": the value of the "hreflang" attribute
</li><li> "media": the value of the "media" attribute
</li><li> "title": the value of the "title" attribute
</li><li> "type": the value of the "type" attribute
</li><li> "text": the text content of the element if any
</li></ul>
</li><li> if there is no "rels" key in that hash, add it with an empty array value
</li><li> set the value of that "rels" key to an array of all unique items in the set of rel values unioned with the current array value of the "rels" key, sorted alphabetically.
</li></ul>
<a name="rel_parse_examples"></a><h4> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/rel%20parse%20examples"></a> rel parse examples </span></h4>
<p>Here are some examples to show how parsed rels may be reflected into the JSON (empty items key).
</p><p>E.g. parsing this markup:
</p>
<div dir="ltr" style="text-align: left;"><pre class="source-xml"><span class="re1">&lt;a</span> <span class="re0">rel</span>=<span class="st0">"author"</span> <span class="re0">href</span>=<span class="st0">"http://example.com/a"</span><span class="re2">&gt;</span><span class="co3">author a</span><span class="re1">&lt;/a<span class="re2">&gt;</span></span>
<span class="re1">&lt;a</span> <span class="re0">rel</span>=<span class="st0">"author"</span> <span class="re0">href</span>=<span class="st0">"http://example.com/b"</span><span class="re2">&gt;</span><span class="co3">author b</span><span class="re1">&lt;/a<span class="re2">&gt;</span></span>
<span class="re1">&lt;a</span> <span class="re0">rel</span>=<span class="st0">"in-reply-to"</span> <span class="re0">href</span>=<span class="st0">"http://example.com/1"</span><span class="re2">&gt;</span><span class="co3">post 1</span><span class="re1">&lt;/a<span class="re2">&gt;</span></span>
<span class="re1">&lt;a</span> <span class="re0">rel</span>=<span class="st0">"in-reply-to"</span> <span class="re0">href</span>=<span class="st0">"http://example.com/2"</span><span class="re2">&gt;</span><span class="co3">post 2</span><span class="re1">&lt;/a<span class="re2">&gt;</span></span>
<span class="re1">&lt;a</span> <span class="re0">rel</span>=<span class="st0">"alternate home"</span>
   <span class="re0">href</span>=<span class="st0">"http://example.com/fr"</span>
   <span class="re0">media</span>=<span class="st0">"handheld"</span>
   <span class="re0">hreflang</span>=<span class="st0">"fr"</span><span class="re2">&gt;</span><span class="co3">French mobile homepage</span><span class="re1">&lt;/a<span class="re2">&gt;</span></span></pre></div>
<p>Would generate this JSON:
</p>
<div dir="ltr" style="text-align: left;"><pre class="source-javascript"><span class="br0">{</span>
  <span class="st0">"items"</span><span class="sy0">:</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">,</span>
  <span class="st0">"rels"</span><span class="sy0">:</span> <span class="br0">{</span> 
    <span class="st0">"author"</span><span class="sy0">:</span> <span class="br0">[</span> <span class="st0">"http://example.com/a"</span><span class="sy0">,</span> <span class="st0">"http://example.com/b"</span> <span class="br0">]</span><span class="sy0">,</span>
    <span class="st0">"in-reply-to"</span><span class="sy0">:</span> <span class="br0">[</span> <span class="st0">"http://example.com/1"</span><span class="sy0">,</span> <span class="st0">"http://example.com/2"</span> <span class="br0">]</span><span class="sy0">,</span>
    <span class="st0">"alternate"</span><span class="sy0">:</span> <span class="br0">[</span> <span class="st0">"http://example.com/fr"</span> <span class="br0">]</span><span class="sy0">,</span> 
    <span class="st0">"home"</span><span class="sy0">:</span> <span class="br0">[</span> <span class="st0">"http://example.com/fr"</span> <span class="br0">]</span> 
  <span class="br0">}</span><span class="sy0">,</span>
  <span class="st0">"rel-urls"</span><span class="sy0">:</span> <span class="br0">{</span>
    <span class="st0">"http://example.com/a"</span><span class="sy0">:</span> <span class="br0">{</span>
      <span class="st0">"rels"</span><span class="sy0">:</span> <span class="br0">[</span><span class="st0">"author"</span><span class="br0">]</span><span class="sy0">,</span> 
      <span class="st0">"text"</span><span class="sy0">:</span> <span class="st0">"author a"</span>
    <span class="br0">}</span><span class="sy0">,</span>
    <span class="st0">"http://example.com/b"</span><span class="sy0">:</span> <span class="br0">{</span>
      <span class="st0">"rels"</span><span class="sy0">:</span> <span class="br0">[</span><span class="st0">"author"</span><span class="br0">]</span><span class="sy0">,</span> 
      <span class="st0">"text"</span><span class="sy0">:</span> <span class="st0">"author b"</span>
    <span class="br0">}</span><span class="sy0">,</span>
    <span class="st0">"http://example.com/1"</span><span class="sy0">:</span> <span class="br0">{</span>
      <span class="st0">"rels"</span><span class="sy0">:</span> <span class="br0">[</span><span class="st0">"in-reply-to"</span><span class="br0">]</span><span class="sy0">,</span> 
      <span class="st0">"text"</span><span class="sy0">:</span> <span class="st0">"post 1"</span>
    <span class="br0">}</span><span class="sy0">,</span>
    <span class="st0">"http://example.com/2"</span><span class="sy0">:</span> <span class="br0">{</span>
      <span class="st0">"rels"</span><span class="sy0">:</span> <span class="br0">[</span><span class="st0">"in-reply-to"</span><span class="br0">]</span><span class="sy0">,</span> 
      <span class="st0">"text"</span><span class="sy0">:</span> <span class="st0">"post 2"</span>
    <span class="br0">}</span><span class="sy0">,</span>
    <span class="st0">"http://example.com/fr"</span><span class="sy0">:</span> <span class="br0">{</span>
      <span class="st0">"rels"</span><span class="sy0">:</span> <span class="br0">[</span><span class="st0">"alternate"</span><span class="sy0">,</span> <span class="st0">"home"</span><span class="br0">]</span><span class="sy0">,</span>
      <span class="st0">"media"</span><span class="sy0">:</span> <span class="st0">"handheld"</span><span class="sy0">,</span> 
      <span class="st0">"hreflang"</span><span class="sy0">:</span> <span class="st0">"fr"</span><span class="sy0">,</span> 
      <span class="st0">"text"</span><span class="sy0">:</span> <span class="st0">"French mobile homepage"</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div>
<p><br/>
</p>
<a name="what_do_the_CSS_selector_expressions_mean"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/what%20do%20the%20CSS%20selector%20expressions%20mean"></a> what do the CSS selector expressions mean </span></h2>
<p><i>This section is non-normative.</i>
</p><p>Use <a class="external text" href="http://gallery.theopalgroup.com/selectoracle/" rel="nofollow" title="http://gallery.theopalgroup.com/selectoracle/">SelectORacle</a> to expand any of the above CSS selector expressions into longform English prose.
</p><p>Exception:
</p>
<ul><li> <b>:not[.h-*]</b> is not a valid CSS selector but is used here to mean:
<ul><li> does not have any class names that start with "h-"
</li></ul>
</li></ul>
<a name="note_HTML_parsing_rules"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/note%20HTML%20parsing%20rules"></a> note HTML parsing rules </span></h2>
<p><i>This section is non-normative.</i>
</p><p>microformats2 parsers are expected to follow HTML parsing rules, which includes for example:
</p>
<ul><li> ignore <code>&lt;template&gt;</code> elements - stuff between <code>&lt;template&gt;</code> tags don't end up in the DOM
<ul><li> test-case in the wild: <a class="external free" href="http://sixtwothree.org/blog/now-accepting-webmentions/" rel="nofollow" title="http://sixtwothree.org/blog/now-accepting-webmentions/">http://sixtwothree.org/blog/now-accepting-webmentions/</a>
</li></ul>
</li></ul>
<a name="note_backward_compatibility_details"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/note%20backward%20compatibility%20details"></a> note backward compatibility details </span></h2>
<p>The parsing algorithm and details refer to "backcompat root classes" (backcompat roots for short) and "backcompat properties". These conditions and steps in the algorithm document how to parse pre-microformats2 microformats which all defined their own specific root class names and explicit sets of properties.
</p><p>Some details to be aware of (which are explicitly in the algorithm, this is just an informal summary)
</p>
<ul><li> If an element has one or more microformats2 root class name(s) (<code>h-*</code>) 
<ul><li> all backcompat root class names are ignored on that element.
</li><li> all backcompat properties, without an intervening root class name, are ignored inside that element
</li></ul>
</li><li> If an element has only a backcompat root class name (or names)
<ul><li> all microformats2 property class names (p-* u-* dt-* e-*), without an intervening element with root class name, are ignored inside that element
</li><li> there is no implied property value parsing (p-name, u-url, u-photo) for that element
</li></ul>
</li></ul>
<a name="backward_compatibility_mappings"></a><h3> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/backward%20compatibility%20mappings"></a> backward compatibility mappings </span></h3>
<p>Note: several parser implementations have encoded backward compatible mappings into source and data files. Implementers of parsers may find these useful:
</p>
<ul><li> search for "modules.maps[" in <a class="external free" href="https://github.com/glennjones/microformat-shiv/blob/master/microformat-shiv.js" rel="nofollow" title="https://github.com/glennjones/microformat-shiv/blob/master/microformat-shiv.js">https://github.com/glennjones/microformat-shiv/blob/master/microformat-shiv.js</a>
</li><li> search for "$classicPropertyMap" in <a class="external free" href="https://github.com/indieweb/php-mf2/blob/master/Mf2/Parser.php" rel="nofollow" title="https://github.com/indieweb/php-mf2/blob/master/Mf2/Parser.php">https://github.com/indieweb/php-mf2/blob/master/Mf2/Parser.php</a>
</li><li> <a class="external free" href="https://github.com/tommorris/mf2py/blob/master/mf2py/backcompat.py" rel="nofollow" title="https://github.com/tommorris/mf2py/blob/master/mf2py/backcompat.py">https://github.com/tommorris/mf2py/blob/master/mf2py/backcompat.py</a>
</li></ul>
<a name="questions"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/questions"></a> questions </span></h2>
<p>See the FAQ:
</p>
<ul><li> <a href="microformats2-parsing-faq.html" title="microformats2-parsing-faq">microformats2-parsing-faq</a>
</li></ul>
<a name="issues"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/issues"></a> issues </span></h2>
<p>See the issues page:
</p>
<ul><li> <a href="microformats2-parsing-issues.html" title="microformats2-parsing-issues">microformats2-parsing-issues</a>
</li></ul>
<a name="implementations"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/implementations"></a> implementations </span></h2>
<div style="text-indent:2em;font-style:italic">Main article: <a href="microformats2.html#Implementations" title="microformats2">microformats2#Implementations</a></div>
<p>There are open source <a href="microformats2.html#Implementations" title="microformats2">microformats2 parsers</a> available for Javascript, node.js, PHP, Ruby and Python.
</p>
<a name="test_suite"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/test%20suite"></a> test suite </span></h2>
<p>See:
</p>
<ul><li> <a class="external free" href="https://github.com/microformats/tests" rel="nofollow" title="https://github.com/microformats/tests">https://github.com/microformats/tests</a>
</li><li> <a class="external free" href="https://github.com/indieweb/php-mf2/tree/master/tests/Mf2" rel="nofollow" title="https://github.com/indieweb/php-mf2/tree/master/tests/Mf2">https://github.com/indieweb/php-mf2/tree/master/tests/Mf2</a>
</li></ul>
<p>Ports to/for other languages encouraged.
</p>
<a name="change_control"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/change%20control"></a> change control </span></h2>
<p>Minor editorial changes (e.g. fixing minor typos or punctuation) that do not change and preferably clarify the structure and existing intended meaning may be done by anyone without filing issues, requiring only a sufficient "Summary" description field entry for the edit. More than minor but still purely editorial changes may be made by an editor. Anyone may question such editorial changes by undoing corresponding edits without filing an issue. Any further reversion or iteration on such an editorial change must be done by filing an issue.
</p><p>Per the stable status of this document, substantive issue filing, resolution, and edits are done with the following change control steps, which may nearly all be done asynchronously once an issue is filed to reach the required state of "Resolve by implementation verified rough consensus". All steps should be openly documented (e.g. on this wiki or GitHub issues) such that others may later verify the history of an issue, and all steps are encouraged to be announced on #microformats <a class="mw-redirect" href="http://microformats.org/wiki/IRC" title="IRC">IRC</a> with a link to the issue.
</p>
<ul><li> <b>File an issue.</b> Anyone may file a new <a href="microformats2-parsing-issues.html" title="microformats2-parsing-issues">issue</a> and is encouraged to do so, with the caveat that per the stable status, only issues originating as a result of implementation experience are likely to have a substantive impact on this specification.
</li><li> <b>Propose a resolution.</b> Anyone may propose resolutions to existing issues, and should encourage others in the community, especially implementers, to provide feedback. Proposed resolutions should include what specific text of the spec needs changing, preferably with replacement text, and test cases if applicable (e.g. a resolution could just document the current state more precisely without needing to provide any new test cases).
</li><li> <b>Provide feedback on proposed resolution(s).</b> Anyone may provide feedback on proposed resolutions with their name attached, in summary (e.g. +1/0/-1 opinions), and additionally with reasoning (required for objections, optional otherwise), or optionally with suggested improvements, or counter-proposals (per "Propose a resolution" above).
</li><li> <b>Iterate to resolve objections if any.</b> If there are any objections to a proposed resolution, proposer(s) and anyone agreeing should work to iterate on the proposal to resolve objections to the satisfaction (or at least withdrawal of objection) of anyone objecting. The more objections resolved the better, and incremental progress is forward progress.
</li><li> <b>Broaden implementer consensus.</b> Proposer(s) and anyone agreeing should reach out (e.g. via #microformats <a class="mw-redirect" href="http://microformats.org/wiki/IRC" title="IRC">IRC</a>) to multiple implementers of the specification to get their opinions and feedback on proposal(s). The more implementers providing feedback the better. Iterate to resolve any new objections per "Iterate to resolve objections if any" above.
</li><li> <b>Encourage and get 1+ implementation(s).</b> Encourage, get, and document 1+ implementation(s) of implementation affecting aspects of a proposed resolution, preferably with a test case if applicable.
</li><li> <b>Resolve by implementation verified rough consensus.</b> Once there is rough consensus on a proposal (where <dfn>rough consensus</dfn> means <strong>either no objections, or at a minimum no objections by implementers, and explicit positive opinions by 2+ implementers</strong>) and a proposal's feasibility is verified by at least 1 implementation of aspects of the proposal that affect implementations (none needed if there are none, e.g. purely editorial), cite those in a "Resolution:" statement on the issue (e.g. in a comment), and explicitly share this resolution statement and link to issue in the #microformats <a class="mw-redirect" href="http://microformats.org/wiki/IRC" title="IRC">IRC</a> channel.
</li><li> <b>Edit specification.</b> Normally the spec editor(s) will make edits per implementation verified rough consensus resolutions, however anyone (though especially issue discussion participants) may make a specification edit per a resolution if they are able to verify the citations that the resolution has achieve rough consensus, and has 1+ implementation(s) per "Encourage and get 1+ implementation(s)" above. Edits must contain a "Summary" field entry that at a minimum mention the issue by name, should provide a URL to the issue resolution, and preferably be done by a spec editor or an implementer. Once the edit is made, the issue should be closed, or at least a comment made on the issue requesting that the opener of the issue close the issue.
</li></ul>
<p>These change control steps are inspired by the tradition of "Rough consensus and running code" as exhibited by example by IETF and W3C processes, and in that regard, seek to be a philosophically compatible approach to specification iteration. They have been in rough practice since 2015-01-21, increasingly strictly applied since then with consensus of issue discussion participants, and explicitly documented based on issue resolving and spec editing experience.
</p>
<a name="see_also"></a><h2> <span class="mw-headline"><a class="dashAnchor" name="//apple_ref/cpp/Section/see%20also"></a> see also </span></h2>
<ul><li> <a href="microformats2.html" title="microformats2">microformats2</a>
</li><li> <a href="microformats2-parsing-faq.html" title="microformats2-parsing-faq">microformats2-parsing-faq</a>
</li><li> <a href="microformats2-parsing-issues.html" title="microformats2-parsing-issues">microformats2-parsing-issues</a>
</li><li> <a href="microformats2-parsing-brainstorming.html" title="microformats2-parsing-brainstorming">microformats2-parsing-brainstorming</a> - for background, thinking, exploring possibilities
</li><li> <a href="microformats2-parsing-rdf.html" title="microformats2-parsing-rdf">microformats2-parsing-rdf</a>
</li><li> <a href="microformats2-implied-properties.html" title="microformats2-implied-properties">microformats2-implied-properties</a>
</li></ul>

<!-- 
NewPP limit report
Preprocessor node count: 223/1000000
Post-expand include size: 511/2097152 bytes
Template argument size: 29/2097152 bytes
Expensive parser function count: 0/100
-->
<div class="printfooter">
Retrieved from "<a href="microformats2-parsing.html">http://microformats.org/wiki/microformats2-parsing</a>"</div>
		</div>	
		
			        <h2>Categories</h2>
		    <div id="category-links">
		        <ul>
		        		            <li><a href="http://microformats.org/wiki/Category:Draft_Specifications" rel="tag">
		                Draft Specifications		            </a></li>
		        		        </ul>
		    </div>		        
				
                    
        
        

	</div>
	
<!-- end of the sidebar -->

<div id="footer">


    <address class="vcard">
        The content of this wiki is the combined effort of the
        <a class="fn org url" href="http://microformats.org/">
            microformats community
        </a>.
    </address>

	<ul>
    				<li id="about"><a href="http://microformats.org/wiki/Microformats_Wiki:About" title="Microformats Wiki:About">About Microformats Wiki</a></li>
				<li id="disclaimer"><a href="http://microformats.org/wiki/Microformats_Wiki:General_disclaimer" title="Microformats Wiki:General disclaimer">Disclaimers</a></li>
        <li>Powered by <a href="http://mediawiki.org/">MediaWiki</a> | <a href="http://mediatemple.net/">(mt) media temple</a></li>
	</ul>
</div>

		
<!-- Served in 0.412 secs. -->






</body><!-- Mirrored from microformats.org/wiki/microformats2-parsing by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Sep 2018 13:59:29 GMT --></html>